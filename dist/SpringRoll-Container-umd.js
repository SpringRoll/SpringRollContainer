!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.SRC=t.SRC||{})}(this,function(t){"use strict";var e={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(e.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=ArrayBuffer.isView||function(t){return t&&n.indexOf(Object.prototype.toString.call(t))>-1};function r(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function s(t){return"string"!=typeof t&&(t=String(t)),t}function o(t){var n={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e.iterable&&(n[Symbol.iterator]=function(){return n}),n}function u(t){this.map={},t instanceof u?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function a(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function c(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function l(t){var e=new FileReader,n=c(e);return e.readAsArrayBuffer(t),n}function h(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function d(){return this.bodyUsed=!1,this._initBody=function(t){var n;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:e.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:e.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():e.arrayBuffer&&e.blob&&((n=t)&&DataView.prototype.isPrototypeOf(n))?(this._bodyArrayBuffer=h(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):e.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||i(t))?this._bodyArrayBuffer=h(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},e.blob&&(this.blob=function(){var t=a(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?a(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(l)}),this.text=function(){var t,e,n,i=a(this);if(i)return i;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=c(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),i=0;i<e.length;i++)n[i]=String.fromCharCode(e[i]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},e.formData&&(this.formData=function(){return this.text().then(y)}),this.json=function(){return this.text().then(JSON.parse)},this}u.prototype.append=function(t,e){t=r(t),e=s(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},u.prototype.delete=function(t){delete this.map[r(t)]},u.prototype.get=function(t){return t=r(t),this.has(t)?this.map[t]:null},u.prototype.has=function(t){return this.map.hasOwnProperty(r(t))},u.prototype.set=function(t,e){this.map[r(t)]=s(e)},u.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},u.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),o(t)},u.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),o(t)},u.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),o(t)},e.iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);var f=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function p(t,e){var n,i,r=(e=e||{}).body;if(t instanceof p){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new u(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new u(e.headers)),this.method=(n=e.method||this.method||"GET",i=n.toUpperCase(),f.indexOf(i)>-1?i:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function y(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(i),decodeURIComponent(r))}}),e}function v(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new u(e.headers),this.url=e.url||"",this._initBody(t)}p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},d.call(p.prototype),d.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},v.error=function(){var t=new v(null,{status:0,statusText:""});return t.type="error",t};var g=[301,302,303,307,308];v.redirect=function(t,e){if(-1===g.indexOf(e))throw new RangeError("Invalid status code");return new v(null,{status:e,headers:{location:t}})};var m=self.DOMException;try{new m}catch(t){(m=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack}).prototype=Object.create(Error.prototype),m.prototype.constructor=m}function b(t,n){return new Promise(function(i,r){var s=new p(t,n);if(s.signal&&s.signal.aborted)return r(new m("Aborted","AbortError"));var o=new XMLHttpRequest;function a(){o.abort()}o.onload=function(){var t,e,n={status:o.status,statusText:o.statusText,headers:(t=o.getAllResponseHeaders()||"",e=new u,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var n=t.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();e.append(i,r)}}),e)};n.url="responseURL"in o?o.responseURL:n.headers.get("X-Request-URL");var r="response"in o?o.response:o.responseText;i(new v(r,n))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.onabort=function(){r(new m("Aborted","AbortError"))},o.open(s.method,s.url,!0),"include"===s.credentials?o.withCredentials=!0:"omit"===s.credentials&&(o.withCredentials=!1),"responseType"in o&&e.blob&&(o.responseType="blob"),s.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),s.signal&&(s.signal.addEventListener("abort",a),o.onreadystatechange=function(){4===o.readyState&&s.signal.removeEventListener("abort",a)}),o.send(void 0===s._bodyInit?null:s._bodyInit)})}b.polyfill=!0,self.fetch||(self.fetch=b,self.Headers=u,self.Request=p,self.Response=v);var w={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},_=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function!");return t},E=function(t,e,n){if(_(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}},S={}.toString,B=function(t){return S.call(t).slice(8,-1)},O="".split,x=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==B(t)?O.call(t,""):Object(t)},P=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},M=function(t){return Object(P(t))},T=Math.ceil,L=Math.floor,j=function(t){return isNaN(t=+t)?0:(t>0?L:T)(t)},k=Math.min,A=function(t){return t>0?k(j(t),9007199254740991):0},C=function(t){return"object"==typeof t?null!==t:"function"==typeof t},F=Array.isArray||function(t){return"Array"==B(t)};function R(t,e){return t(e={exports:{}},e.exports),e.exports}var I,D,U,V,G,N,W,q,z,H,K,$="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),J=function(t){try{return!!t()}catch(t){return!0}},X=!J(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),Q=$.document,Y=C(Q)&&C(Q.createElement),Z=function(t){return Y?Q.createElement(t):{}},tt=!X&&!J(function(){return 7!=Object.defineProperty(Z("div"),"a",{get:function(){return 7}}).a}),et=function(t){if(!C(t))throw TypeError(String(t)+" is not an object!");return t},nt=function(t,e){if(!C(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!C(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!C(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!C(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")},it=Object.defineProperty,rt={f:X?it:function(t,e,n){if(et(t),e=nt(e,!0),et(n),tt)try{return it(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},st=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},ot=X?function(t,e,n){return rt.f(t,e,st(1,n))}:function(t,e,n){return t[e]=n,t},ut=function(t,e){try{ot($,t,e)}catch(n){$[t]=e}return e},at=R(function(t){var e=$["__core-js_shared__"]||ut("__core-js_shared__",{});(t.exports=function(t,n){return e[t]||(e[t]=void 0!==n?n:{})})("versions",[]).push({version:"3.0.0-beta.3",mode:"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})}),ct=0,lt=Math.random(),ht=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++ct+lt).toString(36))},dt=!J(function(){}),ft=at("wks"),pt=$.Symbol,yt=function(t){return ft[t]||(ft[t]=dt&&pt[t]||(dt?pt:ht)("Symbol."+t))},vt=yt("species"),gt=[].forEach,mt=(U=1==(I=0),V=2==I,G=3==I,N=4==I,W=6==I,q=5==I||W,z=D||function(t,e){var n;return F(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!F(n.prototype)?C(n)&&null===(n=n[vt])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},function(t,e,n){for(var i,r,s=M(t),o=x(s),u=E(e,n,3),a=A(o.length),c=0,l=U?z(t,a):V?z(t,0):void 0;a>c;c++)if((q||c in o)&&(r=u(i=o[c],c,s),I))if(U)l[c]=r;else if(r)switch(I){case 3:return!0;case 5:return i;case 6:return c;case 2:l.push(i)}else if(N)return!1;return W?-1:G||N?N:l}),bt=(K=!0,!!(H=gt)&&J(function(){K?H.call(null,function(){},1):H.call(null)}))?gt:function(t){return mt(this,t,arguments[1])};for(var wt in w){var _t=$[wt],Et=_t&&_t.prototype;if(Et&&Et.forEach!==bt)try{ot(Et,"forEach",bt)}catch(t){Et.forEach=bt}}var St,Bt=function(t){return x(P(t))},Ot={}.hasOwnProperty,xt=function(t,e){return Ot.call(t,e)},Pt=Math.max,Mt=Math.min,Tt={},Lt=(St=!1,function(t,e,n){var i,r=Bt(t),s=A(r.length),o=function(t,e){var n=j(t);return n<0?Pt(n+e,0):Mt(n,e)}(n,s);if(St&&e!=e){for(;s>o;)if((i=r[o++])!=i)return!0}else for(;s>o;o++)if((St||o in r)&&r[o]===e)return St||o||0;return!St&&-1}),jt=function(t,e){var n,i=Bt(t),r=0,s=[];for(n in i)!xt(Tt,n)&&xt(i,n)&&s.push(n);for(;e.length>r;)xt(i,n=e[r++])&&(~Lt(s,n)||s.push(n));return s},kt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],At=Object.keys||function(t){return jt(t,kt)},Ct=X?Object.defineProperties:function(t,e){et(t);for(var n,i=At(e),r=i.length,s=0;r>s;)rt.f(t,n=i[s++],e[n]);return t},Ft=$.document,Rt=Ft&&Ft.documentElement,It=at("keys"),Dt=function(t){return It[t]||(It[t]=ht(t))},Ut=Dt("IE_PROTO"),Vt=function(){},Gt=function(){var t,e=Z("iframe"),n=kt.length;for(e.style.display="none",Rt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Gt=t.F;n--;)delete Gt.prototype[kt[n]];return Gt()},Nt=Object.create||function(t,e){var n;return null!==t?(Vt.prototype=et(t),n=new Vt,Vt.prototype=null,n[Ut]=t):n=Gt(),void 0===e?n:Ct(n,e)};Tt[Ut]=!0;var Wt=yt("unscopables"),qt=Array.prototype;null==qt[Wt]&&ot(qt,Wt,Nt(null));var zt,Ht,Kt,$t=function(t){qt[Wt][t]=!0},Jt={},Xt=at("native-function-to-string",Function.toString),Qt=$.WeakMap;if("function"==typeof Qt&&/native code/.test(Xt.call(Qt))){var Yt=new Qt,Zt=Yt.get,te=Yt.has,ee=Yt.set;zt=function(t,e){return ee.call(Yt,t,e),e},Ht=function(t){return Zt.call(Yt,t)||{}},Kt=function(t){return te.call(Yt,t)}}else{var ne=Dt("state");Tt[ne]=!0,zt=function(t,e){return ot(t,ne,e),e},Ht=function(t){return xt(t,ne)?t[ne]:{}},Kt=function(t){return xt(t,ne)}}var ie,re,se,oe={set:zt,get:Ht,has:Kt,enforce:function(t){return Kt(t)?Ht(t):zt(t,{})},getterFor:function(t){return function(e){var n;if(!C(e)||(n=Ht(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required!");return n}}},ue=R(function(t){var e=oe.get,n=oe.enforce,i=String(Xt).split("toString");at("inspectSource",function(t){return Xt.call(t)}),(t.exports=function(t,e,r,s){"function"==typeof r&&("string"!=typeof e||xt(r,"name")||ot(r,"name",e),n(r).source=i.join("string"==typeof e?e:"")),t===$?ut(e,r):s?t[e]?t[e]=r:ot(t,e,r):(delete t[e],ot(t,e,r))})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||Xt.call(this)})}),ae=kt.concat("length","prototype"),ce={f:Object.getOwnPropertyNames||function(t){return jt(t,ae)}},le={f:Object.getOwnPropertySymbols},he=$.Reflect,de=he&&he.ownKeys||function(t){var e=ce.f(et(t)),n=le.f;return n?e.concat(n(t)):e},fe={}.propertyIsEnumerable,pe=Object.getOwnPropertyDescriptor,ye={f:pe&&!fe.call({1:2},1)?function(t){var e=pe(this,t);return!!e&&e.enumerable}:fe},ve=Object.getOwnPropertyDescriptor,ge={f:X?ve:function(t,e){if(t=Bt(t),e=nt(e,!0),tt)try{return ve(t,e)}catch(t){}if(xt(t,e))return st(!ye.f.call(t,e),t[e])}},me=function(t,e){for(var n=de(e),i=rt.f,r=ge.f,s=0;s<n.length;s++){var o=n[s];xt(t,o)||i(t,o,r(e,o))}},be=function(t,e){var n,i,r,s,o=t.target;if(n=t.global?$:t.stat?$[o]||ut(o,{}):($[o]||{}).prototype)for(i in e){if(r=n[i],s=e[i],!t.forced&&void 0!==r){if(typeof s==typeof r)continue;me(s,r)}(t.sham||r&&r.sham)&&ot(s,"sham",!0),ue(n,i,s,t.unsafe)}},we=!J(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),_e=Dt("IE_PROTO"),Ee=Object.prototype,Se=we?Object.getPrototypeOf:function(t){return t=M(t),xt(t,_e)?t[_e]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Ee:null},Be=yt("iterator"),Oe=!1;[].keys&&("next"in(se=[].keys())?(re=Se(Se(se)))!==Object.prototype&&(ie=re):Oe=!0),null==ie&&(ie={}),xt(ie,Be)||ot(ie,Be,function(){return this});var xe={IteratorPrototype:ie,BUGGY_SAFARI_ITERATORS:Oe},Pe=rt.f,Me=yt("toStringTag"),Te=function(t,e,n){t&&!xt(t=n?t:t.prototype,Me)&&Pe(t,Me,{configurable:!0,value:e})},Le=xe.IteratorPrototype,je=function(){return this},ke=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e={},n=!0;try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(e,[]),n=e instanceof Array}catch(t){n=!1}return function(e,i){return function(t,e){if(et(t),!C(e)&&null!==e)throw TypeError(String(e)+": can't set as a prototype!")}(e,i),n?t.call(e,i):e.__proto__=i,e}}():void 0),Ae=yt("iterator"),Ce=xe.IteratorPrototype,Fe=xe.BUGGY_SAFARI_ITERATORS,Re=function(){return this},Ie=function(t,e,n,i,r,s,o){!function(t,e,n){var i=e+" Iterator";t.prototype=Nt(Le,{next:st(1,n)}),Te(t,i,!1),Jt[i]=je}(n,e,i);var u,a,c,l=function(t){if(t===r&&y)return y;if(!Fe&&t in f)return f[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},h=e+" Iterator",d=!1,f=t.prototype,p=f[Ae]||f["@@iterator"]||r&&f[r],y=!Fe&&p||l(r),v="Array"==e&&f.entries||p;if(v&&(u=Se(v.call(new t)),Ce!==Object.prototype&&u.next&&(Se(u)!==Ce&&(ke?ke(u,Ce):"function"!=typeof u[Ae]&&ot(u,Ae,Re)),Te(u,h,!0))),"values"==r&&p&&"values"!==p.name&&(d=!0,y=function(){return p.call(this)}),f[Ae]!==y&&ot(f,Ae,y),Jt[e]=y,r)if(a={values:l("values"),keys:s?y:l("keys"),entries:l("entries")},o)for(c in a)!Fe&&!d&&c in f||ue(f,c,a[c]);else be({target:e,proto:!0,forced:Fe||d},a);return a},De=oe.set,Ue=oe.getterFor("Array Iterator"),Ve=Ie(Array,"Array",function(t,e){De(this,{type:"Array Iterator",target:Bt(t),index:0,kind:e})},function(){var t=Ue(this),e=t.target,n=t.kind,i=t.index++;return!e||i>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:e[i],done:!1}:{value:[i,e[i]],done:!1}},"values");Jt.Arguments=Jt.Array,$t("keys"),$t("values"),$t("entries");var Ge=yt("iterator"),Ne=yt("toStringTag"),We=Ve.values;for(var qe in w){var ze=$[qe],He=ze&&ze.prototype;if(He){if(He[Ge]!==We)try{ot(He,Ge,We)}catch(t){He[Ge]=We}if(He[Ne]||ot(He,Ne,qe),w[qe])for(var Ke in Ve)if(He[Ke]!==Ve[Ke])try{ot(He,Ke,Ve[Ke])}catch(t){He[Ke]=Ve[Ke]}}}var $e=$,Je=R(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),Xe=R(function(t){var e=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=e)}),Qe=(Xe.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),Ye=function(t){if(!Qe(t))throw TypeError(t+" is not an object!");return t},Ze=function(t){try{return!!t()}catch(t){return!0}},tn=!Ze(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),en=Je.document,nn=Qe(en)&&Qe(en.createElement),rn=!tn&&!Ze(function(){return 7!=Object.defineProperty((t="div",nn?en.createElement(t):{}),"a",{get:function(){return 7}}).a;var t}),sn=Object.defineProperty,on={f:tn?Object.defineProperty:function(t,e,n){if(Ye(t),e=function(t,e){if(!Qe(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!Qe(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!Qe(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!Qe(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}(e,!0),Ye(n),rn)try{return sn(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},un=tn?function(t,e,n){return on.f(t,e,function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}(1,n))}:function(t,e,n){return t[e]=n,t},an={}.hasOwnProperty,cn=function(t,e){return an.call(t,e)},ln=0,hn=Math.random(),dn=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++ln+hn).toString(36))},fn=R(function(t){var e=dn("src"),n=Function.toString,i=(""+n).split("toString");Xe.inspectSource=function(t){return n.call(t)},(t.exports=function(t,n,r,s){var o="function"==typeof r;o&&(cn(r,"name")||un(r,"name",n)),t[n]!==r&&(o&&(cn(r,e)||un(r,e,t[n]?""+t[n]:i.join(String(n)))),t===Je?t[n]=r:s?t[n]?t[n]=r:un(t,n,r):(delete t[n],un(t,n,r)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[e]||n.call(this)})}),pn=function(t,e,n){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}},yn=function(t,e,n){var i,r,s,o,u=t&yn.F,a=t&yn.G,c=t&yn.S,l=t&yn.P,h=t&yn.B,d=a?Je:c?Je[e]||(Je[e]={}):(Je[e]||{}).prototype,f=a?Xe:Xe[e]||(Xe[e]={}),p=f.prototype||(f.prototype={});for(i in a&&(n=e),n)s=((r=!u&&d&&void 0!==d[i])?d:n)[i],o=h&&r?pn(s,Je):l&&"function"==typeof s?pn(Function.call,s):s,d&&fn(d,i,s,t&yn.U),f[i]!=s&&un(f,i,o),l&&p[i]!=s&&(p[i]=s)};Je.core=Xe,yn.F=1,yn.G=2,yn.S=4,yn.P=8,yn.B=16,yn.W=32,yn.U=64,yn.R=128;var vn,gn=yn,mn={}.toString,bn=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==function(t){return mn.call(t).slice(8,-1)}(t)?t.split(""):Object(t)},wn=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},_n=function(t){return bn(wn(t))},En=Math.ceil,Sn=Math.floor,Bn=function(t){return isNaN(t=+t)?0:(t>0?Sn:En)(t)},On=Math.min,xn=Math.max,Pn=Math.min,Mn=Je["__core-js_shared__"]||(Je["__core-js_shared__"]={}),Tn=Mn[vn="keys"]||(Mn[vn]={}),Ln=function(t){return function(e,n,i){var r,s,o=_n(e),u=(s=o.length)>0?On(Bn(s),9007199254740991):0,a=function(t,e){return(t=Bn(t))<0?xn(t+e,0):Pn(t,e)}(i,u);if(t&&n!=n){for(;u>a;)if((r=o[a++])!=r)return!0}else for(;u>a;a++)if((t||a in o)&&o[a]===n)return t||a||0;return!t&&-1}}(!1),jn=function(t){return Tn[t]||(Tn[t]=dn(t))}("IE_PROTO"),kn="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),An=Object.keys||function(t){return function(t,e){var n,i=_n(t),r=0,s=[];for(n in i)n!=jn&&cn(i,n)&&s.push(n);for(;e.length>r;)cn(i,n=e[r++])&&(~Ln(s,n)||s.push(n));return s}(t,kn)},Cn={f:Object.getOwnPropertySymbols},Fn={f:{}.propertyIsEnumerable},Rn=Object.assign,In=!Rn||Ze(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=Rn({},t)[n]||Object.keys(Rn({},e)).join("")!=i})?function(t,e){for(var n=Object(wn(t)),i=arguments.length,r=1,s=Cn.f,o=Fn.f;i>r;)for(var u,a=bn(arguments[r++]),c=s?An(a).concat(s(a)):An(a),l=c.length,h=0;l>h;)o.call(a,u=c[h++])&&(n[u]=a[u]);return n}:Rn;gn(gn.S+gn.F,"Object",{assign:In});var Dn,Un,Vn,Gn=function(t,e,n){if(!(t instanceof e))throw TypeError((n?n+": i":"I")+"ncorrect invocation!");return t},Nn=yt("iterator"),Wn=Array.prototype,qn=yt("toStringTag"),zn="Arguments"==B(function(){return arguments}()),Hn=yt("iterator"),Kn=function(t){if(null!=t)return t[Hn]||t["@@iterator"]||Jt[function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),qn))?n:zn?B(e):"Object"==(i=B(e))&&"function"==typeof e.callee?"Arguments":i}(t)]},$n=function(t,e,n,i){try{return i?e(et(n)[0],n[1]):e(n)}catch(e){var r=t.return;throw void 0!==r&&et(r.call(t)),e}},Jn=R(function(t){var e={};(t.exports=function(t,n,i,r,s){var o,u,a,c,l,h,d=E(n,i,r?2:1);if(s)o=t;else{if("function"!=typeof(u=Kn(t)))throw TypeError("Target is not iterable!");if(void 0!==(h=u)&&(Jt.Array===h||Wn[Nn]===h)){for(a=0,c=A(t.length);c>a;a++)if((r?d(et(l=t[a])[0],l[1]):d(t[a]))===e)return;return}o=u.call(t)}for(;!(l=o.next()).done;)if($n(o,d,l.value,r)===e)return}).BREAK=e}),Xn=yt("iterator"),Qn=function(t,e){if(!e)return!1;var n=!1;try{var i={};i[Xn]=function(){return{next:function(){return{done:n=!0}}}},t(i)}catch(t){}return n},Yn=yt("species"),Zn=$.setImmediate,ti=$.clearImmediate,ei=$.process,ni=$.MessageChannel,ii=$.Dispatch,ri=0,si={},oi=function(){var t=+this;if(si.hasOwnProperty(t)){var e=si[t];delete si[t],e()}},ui=function(t){oi.call(t.data)};Zn&&ti||(Zn=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return si[++ri]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Dn(ri),ri},ti=function(t){delete si[t]},"process"==B(ei)?Dn=function(t){ei.nextTick(E(oi,t,1))}:ii&&ii.now?Dn=function(t){ii.now(E(oi,t,1))}:ni?(Vn=(Un=new ni).port2,Un.port1.onmessage=ui,Dn=E(Vn.postMessage,Vn,1)):$.addEventListener&&"function"==typeof postMessage&&!$.importScripts?(Dn=function(t){$.postMessage(t+"","*")},$.addEventListener("message",ui,!1)):Dn="onreadystatechange"in Z("script")?function(t){Rt.appendChild(Z("script")).onreadystatechange=function(){Rt.removeChild(this),oi.call(t)}}:function(t){setTimeout(E(oi,t,1),0)});var ai,ci,li,hi={set:Zn,clear:ti},di=hi.set,fi=$.MutationObserver||$.WebKitMutationObserver,pi=$.process,yi=$.Promise,vi="process"==B(pi),gi=function(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i}),this.resolve=_(e),this.reject=_(n)},mi={f:function(t){return new gi(t)}},bi=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},wi=$.navigator,_i=wi&&wi.userAgent||"",Ei=function(t,e,n){for(var i in e)ue(t,i,e[i],n);return t},Si=yt("species"),Bi=function(t){var e=$[t];X&&e&&!e[Si]&&rt.f(e,Si,{configurable:!0,get:function(){return this}})},Oi="Promise",xi=hi.set,Pi=function(){var t,e,n,i=function(){var i,r;for(vi&&(i=pi.domain)&&i.exit();t;){r=t.fn,t=t.next;try{r()}catch(i){throw t?n():e=void 0,i}}e=void 0,i&&i.enter()};if(vi)n=function(){pi.nextTick(i)};else if(!fi||$.navigator&&$.navigator.standalone)if(yi&&yi.resolve){var r=yi.resolve(void 0);n=function(){r.then(i)}}else n=function(){di.call($,i)};else{var s=!0,o=document.createTextNode("");new fi(i).observe(o,{characterData:!0}),n=function(){o.data=s=!s}}return function(i){var r={fn:i,next:void 0};e&&(e.next=r),t||(t=r,n()),e=r}}(),Mi=yt("species"),Ti=oe.get,Li=oe.set,ji=oe.getterFor(Oi),ki=$.Promise,Ai=$.TypeError,Ci=$.document,Fi=$.process,Ri=Fi&&Fi.versions,Ii=Ri&&Ri.v8||"",Di=mi.f,Ui=Di,Vi="process"==B(Fi),Gi=!!(Ci&&Ci.createEvent&&$.dispatchEvent),Ni=!!function(){try{var t=ki.resolve(1),e=function(){},n=(t.constructor={})[Mi]=function(t){t(e,e)};return(Vi||"function"==typeof PromiseRejectionEvent)&&t.then(e)instanceof n&&0!==Ii.indexOf("6.6")&&-1===_i.indexOf("Chrome/66")}catch(t){}}(),Wi=function(t){var e;return!(!C(t)||"function"!=typeof(e=t.then))&&e},qi=function(t,e,n){if(!e.notified){e.notified=!0;var i=e.reactions;Pi(function(){for(var r=e.value,s=1==e.state,o=0,u=function(n){var i,o,u,a=s?n.ok:n.fail,c=n.resolve,l=n.reject,h=n.domain;try{a?(s||(2===e.rejection&&$i(t,e),e.rejection=1),!0===a?i=r:(h&&h.enter(),i=a(r),h&&(h.exit(),u=!0)),i===n.promise?l(Ai("Promise-chain cycle")):(o=Wi(i))?o.call(i,c,l):c(i)):l(r)}catch(t){h&&!u&&h.exit(),l(t)}};i.length>o;)u(i[o++]);e.reactions=[],e.notified=!1,n&&!e.rejection&&Hi(t,e)})}},zi=function(t,e,n){var i,r;Gi?((i=Ci.createEvent("Event")).promise=e,i.reason=n,i.initEvent(t,!1,!0),$.dispatchEvent(i)):i={promise:e,reason:n},(r=$["on"+t])?r(i):"unhandledrejection"===t&&function(t,e){var n=$.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},Hi=function(t,e){xi.call($,function(){var n,i=e.value,r=Ki(e);if(r&&(n=bi(function(){Vi?Fi.emit("unhandledRejection",i,t):zi("unhandledrejection",t,i)}),e.rejection=Vi||Ki(e)?2:1),r&&n.e)throw n.v})},Ki=function(t){return 1!==t.rejection&&!t.parent},$i=function(t,e){xi.call($,function(){Vi?Fi.emit("rejectionHandled",t):zi("rejectionhandled",t,e.value)})},Ji=function(t,e,n,i){return function(r){t(e,n,r,i)}},Xi=function(t,e,n,i){e.done||(e.done=!0,i&&(e=i),e.value=n,e.state=2,qi(t,e,!0))},Qi=function(t,e,n,i){if(!e.done){e.done=!0,i&&(e=i);try{if(t===n)throw Ai("Promise can't be resolved itself!");var r=Wi(n);r?Pi(function(){var i={done:!1};try{r.call(n,Ji(Qi,t,i,e),Ji(Xi,t,i,e))}catch(n){Xi(t,i,n,e)}}):(e.value=n,e.state=1,qi(t,e,!1))}catch(n){Xi(t,{done:!1},n,e)}}};Ni||(ki=function(t){Gn(this,ki,Oi),_(t),ai.call(this);var e=Ti(this);try{t(Ji(Qi,this,e),Ji(Xi,this,e))}catch(t){Xi(this,e,t)}},(ai=function(t){Li(this,{type:Oi,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Ei(ki.prototype,{then:function(t,e){var n,i,r,s=ji(this),o=Di((n=ki,void 0===(r=et(this).constructor)||null==(i=et(r)[Yn])?n:_(i)));return o.ok="function"!=typeof t||t,o.fail="function"==typeof e&&e,o.domain=Vi?Fi.domain:void 0,s.parent=!0,s.reactions.push(o),0!=s.state&&qi(this,s,!1),o.promise},catch:function(t){return this.then(void 0,t)}}),ci=function(){var t=new ai,e=Ti(t);this.promise=t,this.resolve=Ji(Qi,t,e),this.reject=Ji(Xi,t,e)},mi.f=Di=function(t){return t===ki||t===li?new ci(t):Ui(t)}),be({global:!0,wrap:!0,forced:!Ni},{Promise:ki}),Te(ki,Oi,!1),Bi(Oi),li=$e.Promise,be({target:Oi,stat:!0,forced:!Ni},{reject:function(t){var e=Di(this);return e.reject.call(void 0,t),e.promise}}),be({target:Oi,stat:!0,forced:!Ni},{resolve:function(t){return function(t,e){if(et(t),C(e)&&e.constructor===t)return e;var n=mi.f(t);return(0,n.resolve)(e),n.promise}(this,t)}}),be({target:Oi,stat:!0,forced:!(Ni&&Qn(function(t){ki.all(t).catch(function(){})}))},{all:function(t){var e=this,n=Di(e),i=n.resolve,r=n.reject,s=bi(function(){var n=[],s=0,o=1;Jn(t,function(t){var u=s++,a=!1;n.push(void 0),o++,e.resolve(t).then(function(t){a||(a=!0,n[u]=t,--o||i(n))},r)}),--o||i(n)});return s.e&&r(s.v),n.promise},race:function(t){var e=this,n=Di(e),i=n.reject,r=bi(function(){Jn(t,function(t){e.resolve(t).then(n.resolve,i)})});return r.e&&i(r.v),n.promise}});var Yi=!J(function(){return Object.isExtensible(Object.preventExtensions({}))}),Zi=R(function(t){var e=ht("meta"),n=rt.f,i=0,r=Object.isExtensible||function(){return!0},s=function(t){n(t,e,{value:{objectID:"O"+ ++i,weakData:{}}})},o=t.exports={REQUIRED:!1,fastKey:function(t,n){if(!C(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!xt(t,e)){if(!r(t))return"F";if(!n)return"E";s(t)}return t[e].objectID},getWeakData:function(t,n){if(!xt(t,e)){if(!r(t))return!0;if(!n)return!1;s(t)}return t[e].weakData},onFreeze:function(t){return Yi&&o.REQUIRED&&r(t)&&!xt(t,e)&&s(t),t}};Tt[e]=!0}),tr=(Zi.REQUIRED,Zi.fastKey,Zi.getWeakData,Zi.onFreeze,rt.f),er=Zi.fastKey,nr=oe.set,ir=oe.getterFor;!function(t,e,n,i,r){var s=$[t],o=s&&s.prototype,u=s,a=i?"set":"add",c={},l=function(t){var e=o[t];ue(o,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(r&&!C(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return r&&!C(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(r&&!C(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof s&&(r||o.forEach&&!J(function(){(new s).entries().next()}))){var h=new u,d=h[a](r?{}:-0,1)!=h,f=J(function(){h.has(1)}),p=Qn(function(t){new s(t)}),y=!r&&J(function(){for(var t=new s,e=5;e--;)t[a](e,e);return!t.has(-0)});p||((u=e(function(e,n){Gn(e,u,t);var r=function(t,e,n){var i,r=e.constructor;return r!==n&&"function"==typeof r&&(i=r.prototype)!==n.prototype&&C(i)&&ke&&ke(t,i),t}(new s,e,u);return null!=n&&Jn(n,r[a],r,i),r})).prototype=o,o.constructor=u),(f||y)&&(l("delete"),l("has"),i&&l("get")),(y||d)&&l(a),r&&o.clear&&delete o.clear}else u=n.getConstructor(e,t,i,a),Zi.REQUIRED=!0;c[t]=u,be({global:!0,forced:u!=s},c),Te(u,t),r||n.setStrong(u,t,i)}("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{getConstructor:function(t,e,n,i){var r=t(function(t,s){Gn(t,r,e),nr(t,{type:e,index:Nt(null),first:void 0,last:void 0,size:0}),X||(t.size=0),null!=s&&Jn(s,t[i],t,n)}),s=ir(e),o=function(t,e,n){var i,r,o=s(t),a=u(t,e);return a?a.value=n:(o.last=a={index:r=er(e,!0),key:e,value:n,previous:i=o.last,next:void 0,removed:!1},o.first||(o.first=a),i&&(i.next=a),X?o.size++:t.size++,"F"!==r&&(o.index[r]=a)),t},u=function(t,e){var n,i=s(t),r=er(e);if("F"!==r)return i.index[r];for(n=i.first;n;n=n.next)if(n.key==e)return n};return Ei(r.prototype,{clear:function(){for(var t=s(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,X?t.size=0:this.size=0},delete:function(t){var e=s(this),n=u(this,t);if(n){var i=n.next,r=n.previous;delete e.index[n.index],n.removed=!0,r&&(r.next=i),i&&(i.previous=r),e.first==n&&(e.first=i),e.last==n&&(e.last=r),X?e.size--:this.size--}return!!n},forEach:function(t){for(var e,n=s(this),i=E(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(i(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!u(this,t)}}),Ei(r.prototype,n?{get:function(t){var e=u(this,t);return e&&e.value},set:function(t,e){return o(this,0===t?0:t,e)}}:{add:function(t){return o(this,t=0===t?0:t,t)}}),X&&tr(r.prototype,"size",{get:function(){return s(this).size}}),r},setStrong:function(t,e,n){var i=e+" Iterator",r=ir(e),s=ir(i);Ie(t,e,function(t,e){nr(this,{type:i,target:t,state:r(t),kind:e,last:void 0})},function(){for(var t=s(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})},n?"entries":"values",!n,!0),Bi(e)}});class rr{constructor(){this._listeners={}}on(t,e,n=0){this._listeners[t]||(this._listeners[t]=[]),e._priority=parseInt(n)||0,-1===this._listeners[t].indexOf(e)&&(this._listeners[t].push(e),this._listeners[t].length>1&&this._listeners[t].sort(this.listenerSorter))}listenerSorter(t,e){return t._priority-e._priority}off(t,e){if(void 0===this._listeners[t])return;if(void 0===e)return void delete this._listeners[t];const n=this._listeners[t].indexOf(e);-1<n&&this._listeners[t].splice(n,1)}trigger(t){if("string"==typeof t&&(t={type:t}),void 0!==this._listeners[t.type])for(let e=this._listeners[t.type].length-1;e>=0;e--)this._listeners[t.type][e](t)}destroy(){this._listeners={}}}class sr extends rr{constructor(t=100*Math.random()|0){super(),this.id=`BELLHOP:${t}`,this.connected=!1,this.isChild=!0,this.connecting=!1,this.origin="*",this._sendLater=[],this.iframe=null}receive(t){this.target===t.source&&("connected"===t.data?this.onConnectionReceived(t.data):this.connected&&"object"==typeof t.data&&t.data.type&&this.trigger(t.data))}onConnectionReceived(t){this.connecting=!1,this.connected=!0,this.trigger("connected"),this.isChild||this.target.postMessage(t,this.origin);for(let t=0,e=this._sendLater.length;t<e;t++){const{type:e,data:n}=this._sendLater[t];this.send(e,n)}this._sendLater.length=0}connect(t,e="*"){this.connecting||(this.disconnect(),this.connecting=!0,t instanceof HTMLIFrameElement&&(this.iframe=t),this.isChild=void 0===t,this.supported=!0,this.isChild&&(this.supported=window!=t),this.origin=e,window.addEventListener("message",this.receive.bind(this)),this.isChild&&(window===this.target?this.trigger("failed"):this.target.postMessage("connected",this.origin)))}disconnect(){this.connected=!1,this.connecting=!1,this.origin=null,this.iframe=null,this.isChild=!0,this._sendLater.length=0,window.removeEventListener("message",this.receive)}send(t,e={}){if("string"!=typeof t)throw"The event type must be a string";const n={type:t,data:e};this.connecting?this._sendLater.push(n):this.target.postMessage(n,this.origin)}fetch(t,e,n={},i=!1){if(!this.connecting&&!this.connected)throw"No connection, please call connect() first";const r=t=>{i&&this.off(t.type,r),e(t)};this.on(t,r),this.send(t,n)}respond(t,e={},n=!1){const i=r=>{n&&this.off(r.type,i),this.send(t,e)};this.on(t,i)}destroy(){super.destroy(),this.disconnect(),this._sendLater.length=0}get target(){return this.isChild?window.parent:this.iframe.contentWindow}}class or{static get webgl(){const t=document.createElement("canvas");return!(!t||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}static get canvas(){const t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))}static get webAudio(){return"webkitAudioContext"in window||"AudioContext"in window}static get webSockets(){return"WebSocket"in window||"MozWebSocket"in window}static get geolocation(){return"geolocation"in navigator}static get webWorkers(){return"function"==typeof Worker}static get touch(){return!!("ontouchstart"in window||navigator.msPointerEnabled&&navigator.msMaxTouchPoints>0||navigator.pointerEnabled&&navigator.maxTouchPoints>0)}static basic(){return or.canvas?or.webAudio?null:"Browser does not support WebAudio":"Browser does not support canvas"}static test(t){const e=this.basic();if(e)return e;const n=t.features,i=t.ui,r=t.sizes;for(const t in n)if(void 0!==n[t]&&!or[t])return"Browser does not support "+t;if(!i.touch&&or.touch)return"Game does not support touch input";if(!i.mouse&&!or.touch)return"Game does not support mouse input";const s=Math.max(window.screen.width,window.screen.height);return!r.xsmall&&s<480?"Game doesn't support extra small screens":!r.small&&s<768?"Game doesn't support small screens":!r.medium&&s<992?"Game doesn't support medium screens":!r.large&&s<1200?"Game doesn't support large screens":!r.xlarge&&s>=1200?"Game doesn't support extra large screens":null}static get info(){return`Browser Feature Detection\n\t\t\t\tCanvas support ${or.canvas?"✓":"×"}\n\t\t\t\tWebGL support ${or.webgl?"✓":"×"}\n\t\t\t\tWebAudio support ${or.webAudio?"✓":"×"}`}}var ur="2.0.0";let ar=(()=>{if("undefined"==typeof Storage)return!1;try{return localStorage.setItem("LS_TEST","test"),localStorage.removeItem("LS_TEST"),!0}catch(t){return!1}})(),cr=!1;class lr{static get WEB_STORAGE_SUPPORT(){return ar}static disableWebStorage(){ar=!1}static get ERASE_COOKIE(){return cr}static set ERASE_COOKIE(t){cr=t}static remove(t){this.WEB_STORAGE_SUPPORT?(localStorage.removeItem(t),sessionStorage.removeItem(t)):lr.write(t,"",this.ERASE_COOKIE)}static write(t,e,n=!1){if(this.WEB_STORAGE_SUPPORT)return void(n?sessionStorage.setItem(t,JSON.stringify(e)):localStorage.setItem(t,JSON.stringify(e)));const i=n?n!==this.ERASE_COOKIE?"":"; expires=Thu, 01 Jan 1970 00:00:00 GMT":"; expires="+new Date(2147483646e3).toUTCString();document.cookie=t+"="+escape(JSON.stringify(e))+i+"; path=/"}static read(t){if(!this.WEB_STORAGE_SUPPORT){const e=`${t}=`,n=document.cookie.split(";");for(let t=0,i=n.length;t<i;t++){let i=n[t];for(;" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(e))return JSON.parse(unescape(i.substring(e.length,i.length)))}return null}const e=localStorage.getItem(t)||sessionStorage.getItem(t);return JSON.parse(e)||null}}class hr{constructor(t,e=[],n=[]){this.name=t,this.required=Array.isArray(e)?e:[],this.optional=Array.isArray(n)?n:[]}preload(t){return Promise.resolve()}setup(t){}open(t){}opened(t){}close(t){}closed(t){}teardown(t){}sendProperty(t,e){lr.write(t,e),this.client.send(t,e)}get client(){return pr.client}}let dr=[],fr=new sr;class pr{constructor(t,e={}){if(this.main=document.querySelector(t),pr.sortPlugins(),null===this.main)throw new Error("No iframe was found with the provided selector");this.client||(this.client=new sr),this.dom=this.main,this.loaded=!1,this.loading=!1,this.options=e,this.release=null,this.plugins=pr.plugins,this.plugins.forEach(t=>t.setup(this)),this.preload()}destroyClient(){this.client&&(this.client.destroy(),this.client=null)}onLoading(){this.client.trigger("opening")}onProgress(){this.client.trigger("progress")}onLoadDone(){this.loading=!1,this.loaded=!0,this.main.classList.remove("loading"),this.plugins.forEach(t=>t.opened(this)),this.client.trigger("opened")}onEndGame(){this.reset()}onLocalError(t){this.client.trigger(t.type)}reset(){const t=this.loaded||this.loading;t&&this.plugins.slice().reverse().forEach(t=>t.closed(this)),t&&this.client.trigger("closed"),this.destroyClient(),this.loaded=!1,this.loading=!1,this.main.setAttribute("src",""),this.main.classList.remove("loading")}initClient(){this.client=new sr,this.client.connect(this.dom),this.client.on("loading",this.onLoading.bind(this)),this.client.on("progress",this.onProgress.bind(this)),this.client.on("loaded",this.onLoadDone.bind(this)),this.client.on("endGame",this.onEndGame.bind(this)),this.client.on("localError",this.onLocalError.bind(this))}_onCloseFailed(){this.reset()}_internalOpen(t,{singlePlay:e=!1,playOptions:n=null}={}){const i={singlePlay:e,playOptions:n};this.reset(),this.loading=!0,this.initClient();const r=or.basic();r&&(console.error("ERROR:",r),this.client.trigger("unsupported")),this.plugins.forEach(t=>t.open(this));let s=t;if(null!==i.playOptions){const e="playOptions="+encodeURIComponent(JSON.stringify(i.playOptions));s=-1===t.indexOf("?")?`${t}?${e}`:`${t}&${e}`}this.main.classList.add("loading"),this.main.setAttribute("src",s),this.client.respond("singlePlay",{singlePlay:e}),this.client.respond("playOptions",{playOptions:n}),this.client.trigger("open")}openPath(t,e={},n={}){"object"!=typeof e&&(console.warn("SpringRoll Container.openPath was passed a invalid options parameter. Using default parameters instead"),e={}),this._internalOpen(t,Object.assign({singlePlay:!1,playOptions:n},e))}openRemote(t,{query:e="",singlePlay:n=!1}={},i=null){this.release=null,fetch(t).then(t=>{200===t.status&&t.json().then(t=>{if(or.test(t))return this.client.trigger("unsupported");this.release=t,this._internalOpen(t.url+e,{singlePlay:n,playOptions:i})})})}destroy(){this.reset(),this.plugins.slice().reverse().forEach(t=>t.teardown(this)),this.main=null,this.options=null,this.dom=null,this.release=null}close(){this.loading||this.loaded?(this.plugins.forEach(t=>t.close(this)),this.client.trigger("close"),this.client.send("close")):this.reset()}preload(){let t=Promise.resolve();for(const e of this.plugins)t=t.then(()=>e.preload(this));t.then(()=>this.client.send("plugins loaded")).catch(t=>console.error("SpringRoll Container Plugin Preloader error: ",t))}static get version(){return ur}static uses(t){t instanceof hr?dr.push(t):console.warn("SpringRollContainer: Was passed a plugin that is not based on the BasePlugin",JSON.stringify(t))}static get plugins(){return dr}static clearPlugins(){return dr=[]}static _setClient(t){(t instanceof sr||null===t)&&(fr=t)}static _getClient(){return fr}set client(t){pr._setClient(t)}static set client(t){this._setClient(t)}static get client(){return this._getClient()}get client(){return pr._getClient()}static sortPlugins(){if(0===dr.length)return;const t=dr.map(t=>t.name),e={};dr.forEach(n=>{const i=n.optional.filter(e=>-1!==t.indexOf(e));e[n.name]={plugin:n,name:n.name,dependencies:[].concat(n.required).concat(i)}});const n=[],i=new Set;if(Object.keys(e).map(t=>e[t]).filter(t=>0===t.dependencies.length).forEach(t=>i.add(t.name)),0===i.size)throw new Error("Every registered plugin has a dependency!");for(;i.size>0;){const t=i.values().next().value;i.delete(t),n.push(t),Object.keys(e).forEach(r=>{const s=e[r].dependencies.indexOf(t);s>-1&&e[r].dependencies.splice(s,1),0===e[r].dependencies.length&&-1===n.indexOf(r)&&i.add(r)})}if(Object.keys(e).filter(t=>e[t].dependencies.length>0).length>0)throw new Error("Dependency graph has a cycle");dr=[],n.forEach(t=>{dr.push(e[t].plugin)})}}class yr{constructor(t=function(){},e=function(){}){this._onFocus=t,this._onBlur=e,this.onFocus=function(){this.enabled&&this._onFocus()}.bind(this),this.onBlur=function(){this.enabled&&this._onBlur()}.bind(this),this._enabled=!1,this.enabled=!0}destroy(){this.enabled=!1,this.onToggle=null,this.onFocus=null,this.onBlur=null}onToggle(t){this.enabled&&(document.hidden?this.onBlur(t):this.onFocus(t))}get enabled(){return this._enabled}set enabled(t){this._enabled=t,document.removeEventListener("visibilitychange",this.onToggle.bind(this),!1),window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),window.removeEventListener("pagehide",this.onBlur),window.removeEventListener("pageshow",this.onFocus),window.removeEventListener("visibilitychange",this.onToggle.bind(this)),this._enabled&&(document.addEventListener("visibilitychange",this.onToggle.bind(this),!1),window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus),window.addEventListener("pagehide",this.onBlur),window.addEventListener("pageshow",this.onFocus),window.addEventListener("visibilitychange",this.onToggle.bind(this),!1))}}class vr extends hr{constructor(t,e=[],n=[]){super(t,e,n),this.sendMutes=!1}setup(){this.sendMutes=!0}teardown(){this.reset()}_disableButton(t){t instanceof HTMLButtonElement&&(t.classList.remove("enabled"),t.classList.add("disabled"))}reset(){this.sendMutes=!1}_setMuteProp(t,e,n){Array.isArray(e)?e.forEach(t=>this.removeListeners(t)):this.removeListeners(e),this.sendProperty(t,n)}removeListeners(t){t instanceof HTMLElement&&(t.classList.remove("unmuted"),t.classList.remove("muted"),t.classList.add(this.sendMutes?"muted":"unmuted"))}}const gr="captionsStyles",mr="captionsMuted",br={size:"md",background:"black-semi",color:"white",edge:"none",font:"arial",align:"top"};class wr{static remove(t,e){lr.remove(t),e()}static write(t,e,n){lr.write(t,e),n()}static read(t,e){e(lr.read(t))}}t.Container=pr,t.Features=or,t.PageVisibility=yr,t.BasePlugin=hr,t.ButtonPlugin=vr,t.CaptionsPlugin=class extends vr{constructor(t){super("Caption-Button-Plugin"),this.captionsStyles=Object.assign({},br,lr.read(gr)||{}),this.captionsButton=document.querySelector(t),this.captionsButton?(this.captionsButton.addEventListener("click",this.captionsButtonClick.bind(this)),this.client.on("features",function(t){this.captionsButton.style.display=t.captions?"inline-block":"none"}),null===lr.read(mr)&&(this.captionsMuted=!0)):console.warn("SpringRollContainer: CaptionPlugin was not provided a button element")}captionsButtonClick(){this.captionsMuted=!this.captionsMuted}clearCaptionsStyles(){this.captionsStyles=Object.assign({},br),this.setCaptionsStyles()}getCaptionsStyles(t){return t?this.captionsStyles[t]:this.captionsStyles}setCaptionsStyles(t=br,e=""){"object"==typeof t?Object.assign(this.captionsStyles,t):"string"==typeof t&&(this.captionsStyles[t]=e),lr.write(gr,this.captionsStyles),this.client&&this.client.send(gr,this.captionsStyles)}opened(){null!==this.captionsButton&&(this.captionsButton.classList.remove("disabled"),this.captionsMuted=!!lr.read(mr),this.setCaptionsStyles(lr.read(gr)))}teardown(){null!==this.captionsButton&&this.captionsButton.removeEventListener("click",this.captionsButtonClick.bind(this))}close(){null!==this.captionsButton&&super._disableButton(this.captionsButton)}},t.FocusPlugin=class extends hr{constructor(t=".pause-on-focus"){super("Focus-Plugin"),this.selector=t,this.dom=null,this._appBlurred=!1,this._keepFocus=!1,this._containerBlurred=!1,this._focusTimer=null,this._isManualPause=!1,this.paused=!1,this.manageFocus=this.manageFocus.bind(this),this.onKeepFocus=this.onKeepFocus.bind(this),this.pageVisibility=new yr(this.onContainerFocus.bind(this),this.onContainerBlur.bind(this)),document.addEventListener("focus",this.onDocClick.bind(this)),document.addEventListener("click",this.onDocClick.bind(this)),this.pauseFocus=document.querySelector(this.selector),null!==this.pauseFocus&&this.pauseFocus.addEventListener("focus",this.onPauseFocus.bind(this))}setup({dom:t}){this.dom=t}onPauseFocus(){this._isManualPause=this.paused=!0,this.pauseFocus.addEventListener("blur",function(){this._isManualPause=this.paused=!1,this.focus()}.bind(this),{once:!0})}focus(){this.dom.contentWindow&&this.dom.contentWindow.focus()}blur(){this.dom.contentWindow&&this.dom.contentWindow.blur()}manageFocus(){this._keepFocus&&this.blur(),this._focusTimer&&clearTimeout(this._focusTimer),this._focusTimer=setTimeout(function(){this._focusTimer=null,this._isManualPause||(this.paused=this._containerBlurred&&this._appBlurred,this._keepFocus&&!this._containerBlurred&&this._appBlurred&&this.focus())}.bind(this),100)}onDocClick(){this.focus()}onKeepFocus(t){this._keepFocus=!!t.data,this.manageFocus()}onFocus(t){this._appBlurred=!t.data,this.manageFocus()}onContainerFocus(){this._containerBlurred=!1,this.manageFocus()}onContainerBlur(){this._containerBlurred=this._appBlurred=!0,this.manageFocus()}open(){this.client.on("focus",this.onFocus.bind(this)),this.client.on("keepFocus",this.onKeepFocus.bind(this))}opened(){this.focus()}close(){this._focusTimer&&clearTimeout(this._focusTimer)}teardown(){null!==this.pauseFocus&&this.pauseFocus.removeEventListener("focus",this.onPauseFocus.bind(this)),document.removeEventListener("focus",this.onDocClick.bind(this)),document.removeEventListener("click",this.onDocClick.bind(this)),this.pageVisibility&&this.pageVisibility.destroy()}},t.HelpPlugin=class extends vr{constructor(t){super("Help-Button-Plugin"),this.helpButton=document.querySelector(t),this.paused=!1,this._helpEnabled=!1,this.helpButton instanceof HTMLElement&&(this.helpButton.addEventListener("click",this.helpButtonClick.bind(this)),this.client.on("pause",function(t){t&&!this.helpButton.classList.contains("disabled")?(this.helpButton.setAttribute("data-paused",!0),this.helpEnabled=!1):this.helpButton.getAttribute("data-paused")&&(this.helpButton.setAttribute("data-paused",""),this.helpEnabled=!0)}.bind(this)),this.client.on("features",function(t){this.helpButton.styles.display=t.hints?"inline-block":"none",this.helpButton.style.display="none"}.bind(this)))}helpButtonClick(){this.paused||this.helpButton.classList.contains("disabled")||this.client.send("playHelp")}teardown(){this.helpButton.removeEventListener("click",this.helpButtonClick.bind(this))}close(){this.client.off("helpEnabled"),this.helpEnabled=!1}open(){this.client.on("helpEnabled",function(t){this.helpEnabled=!!t.data}.bind(this))}get helpEnabled(){return this._helpEnabled}set helpEnabled(t){this._helpEnabled=t,this.helpButton.classList.remove("disabled"),this.helpButton.classList.remove("enabled"),this.helpButton.classList.add(t?"enabled":"disabled"),this.client.trigger("helpEnabled")}},t.PausePlugin=class extends vr{constructor(t){if(super("Pause-Button-plugin"),this.pauseButton=document.querySelectorAll(t),1>this.pauseButton.length)return;const e=this.onPauseToggle.bind(this);this.pauseButton.forEach(t=>t.addEventListener("click",e)),this._isManualPause=!1,this._disablePause=!1,this._paused=!1,this.client.on("features",function(t){t.disablePause&&(this._disablePause=!0)}.bind(this))}onPauseToggle(){this.pause=!this._paused,this._isManualPause=this.paused}opened(){this.pauseButton.forEach(t=>t.classList.remove("disabled")),this.pause=this._paused}close(){this.pauseButton.forEach(t=>this._disableButton.bind(t)),this.paused=!1}teardown(){const t=this.onPauseToggle.bind(this);this.pauseButton.forEach(e=>e.removeEventListener("click",t))}set pause(t){t=!!t,this._disablePause||(this._paused=t,this.client.send("pause",t),this.client.trigger(t?"paused":"resumed"),this.pauseButton.forEach(e=>{e.classList.remove("unpaused"),e.classList.remove("paused"),e.classList.add(t?"paused":"unpaused")}))}get pause(){return this._paused}},t.SoundPlugin=class extends vr{constructor({soundButton:t,musicButton:e,sfxButton:n,voButton:i,soundSlider:r,musicSlider:s,sfxSlider:o,voSlider:u}){super("Sound-Button-Plugin");const a=lr.read("soundMuted");this._soundMuted=a||!1,this._musicMuted=!1,this._voMuted=!1,this._sfxMuted=!1,this.soundVolume=0,this.musicVolume=0,this.sfxVolume=0,this.voVolume=0,this.soundSlider=this.sliderSetup(document.querySelector(r)),this.musicSlider=this.sliderSetup(document.querySelector(s)),this.sfxSlider=this.sliderSetup(document.querySelector(o)),this.voSlider=this.sliderSetup(document.querySelector(u)),this.soundButton=document.querySelector(t),this.musicButton=document.querySelector(e),this.sfxButton=document.querySelector(n),this.voButton=document.querySelector(i),this.soundButton&&this.soundButton.addEventListener("click",this.onSoundToggle.bind(this)),this.musicButton&&this.musicButton.addEventListener("click",this.onMusicToggle.bind(this)),this.sfxButton&&this.sfxButton.addEventListener("click",this.onSFXToggle.bind(this)),this.voButton&&this.voButton.addEventListener("click",this.onVOToggle.bind(this)),this.soundSlider&&this.soundSlider.addEventListener("change",this.onSoundVolumeChange.bind(this)),this.musicSlider&&this.musicSlider.addEventListener("change",this.onMusicVolumeChange.bind(this)),this.sfxSlider&&this.sfxSlider.addEventListener("change",this.onSfxVolumeChange.bind(this)),this.voSlider&&this.voSlider.addEventListener("change",this.onVoVolumeChange.bind(this)),this.client.on("features",function(t){this.voButton.style.display=t.vo&&this.voButton?"inline-block":"none",this.musicButton.style.display=t.music&&this.musicButton?"inline-block":"none",this.soundButton.style.display=t.sound&&this.soundButton?"inline-block":"none",this.sfxButton.style.display=t.sfxButton&&this.sfxButton?"inline-block":"none"}.bind(this))}onSoundVolumeChange(){this.soundVolume=this.volumeRange(Number(this.soundSlider.value)),this.soundMuted=!this.soundVolume,this._checkSoundMute(),this.sendProperty("soundVolume",this.soundVolume)}onMusicVolumeChange(){this.musicVolume=this.volumeRange(Number(this.musicSlider.value)),this.musicMuted=!this.musicVolume,this._checkSoundMute(),this.sendProperty("musicVolume",this.musicVolume)}onVoVolumeChange(){this.voVolume=this.volumeRange(Number(this.voSlider.value)),this.voMuted=!this.voVolume,this._checkSoundMute(),this.sendProperty("voVolume",this.voVolume)}onSfxVolumeChange(){this.sfxVolume=this.volumeRange(Number(this.sfxSlider.value)),this.sfxMuted=!this.sfxVolume,this._checkSoundMute(),this.sendProperty("sfxVolume",this.sfxVolume)}onSoundToggle(){const t=!this.soundMuted;this.soundMuted=t,this.musicMuted=t,this.voMuted=t,this.sfxMuted=t}onMusicToggle(){this.musicMuted=!this.musicMuted,this._checkSoundMute()}onVOToggle(){this.voMuted=!this.voMuted,this._checkSoundMute()}onSFXToggle(){this.sfxMuted=!this.sfxMuted,this._checkSoundMute()}_checkSoundMute(){this.soundMuted=this.sfxMuted&&this.voMuted&&this.musicMuted}setMuteProp(t,e,n){this[t]=e,this._setMuteProp(t,n,e)}opened(){null!==this.soundButton&&this.soundButton.classList.remove("disabled"),null!==this.sfxButton&&this.sfxButton.classList.remove("disabled"),null!==this.voButton&&this.voButton.classList.remove("disabled"),null!==this.musicButton&&this.musicButton.classList.remove("disabled"),this.soundMuted=!!lr.read("soundMuted"),this.musicMuted=!!lr.read("musicMuted"),this.sfxMuted=!!lr.read("sfxMuted"),this.voMuted=!!lr.read("voMuted")}close(){this._disableButton(this.soundButton),this._disableButton(this.voButton),this._disableButton(this.sfxButton),this._disableButton(this.musicButton)}teardown(){null!==this.soundButton&&this.soundButton.removeEventListener("click",this.onSoundToggle.bind(this)),null!==this.musicButton&&this.musicButton.removeEventListener("click",this.onMusicToggle.bind(this)),null!==this.sfxButton&&this.sfxButton.removeEventListener("click",this.onSFXToggle.bind(this)),null!==this.voButton&&this.voButton.removeEventListener("click",this.onVOToggle.bind(this))}sliderSetup(t){return t&&"range"===t.type?(t.min="0",t.max="1",t.step="0.1",t):null}volumeRange(t,e=0,n=1){return t<e?e:t>n?n:t}set soundMuted(t){this.setMuteProp("_soundMuted",t,this.soundButton)}get soundMuted(){return this._soundMuted}set voMuted(t){this.setMuteProp("_voMuted",t,this.voButton)}get voMuted(){return this._voMuted}set musicMuted(t){this.setMuteProp("_musicMuted",t,this.musicButton)}get musicMuted(){return this._musicMuted}set sfxMuted(t){this.setMuteProp("_sfxMuted",t,this.sfxButton)}get sfxMuted(){return this._sfxMuted}},t.UserDataPlugin=class extends hr{constructor(){super("UserData-Plugin")}open(){this.client.on("userDataRemove",this.onUserDataRemove.bind(this)),this.client.on("userDataRead",this.onUserDataRead.bind(this)),this.client.on("userDataWrite",this.onUserDataWrite.bind(this))}onUserDataRemove({data:t,type:e}){wr.remove(t,()=>{this.client.send(e)})}onUserDataRead({data:t,type:e}){wr.read(t,t=>this.client.send(e,t))}onUserDataWrite({data:{name:t,value:e,type:n}}){wr.write(t,e,()=>this.client.send(n))}},t.SavedData=lr,t.SavedDataHandler=wr,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=SpringRoll-Container-umd.js.map
